---
title: 'ã€AWS CLIã€‘S3ã®ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆã‚‚å«ã‚ã¦ã‚³ãƒ”ãƒ¼(CP)ã™ã‚‹æ–¹æ³•'
emoji: 'ğŸ˜' # https://www.webfx.com/tools/emoji-cheat-sheet/
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['awscli', 'aws', 'cli', 's3']
published: true
---

## ã¯ã˜ã‚ã«
`aws s3 cp`ã‚³ãƒãƒ³ãƒ‰ã§ã‚³ãƒ”ãƒ¼ã‚’è¡Œã†éš›ã€ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª[^1]ã¯ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã›ã‚“ã€‚
`mv`ã‚„`sync`ã§ã‚‚åŒæ§˜ã§ã™ã€‚

[^1]: å³å¯†ã«ã¯S3ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã„ã†æ¦‚å¿µã¯ãªãã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ã«`/`ã‚’å«ã‚ã‚‹ã“ã¨ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’è¡¨ç¾ã—ã¦ã„ã‚‹ã€‚

### ãŸã¨ãˆã°
```
SampleDirectory/
â”œâ”€ Hoge/
â”‚  â””â”€ Fuga.pdf
â””â”€ Piyo/
```

ä¸Šè¨˜ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¯¾ã—ã¦`aws s3 cp`ã‚³ãƒãƒ³ãƒ‰ã§ã‚³ãƒ”ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸­èº«ãŒç©ºã§ã‚ã‚‹Piyoãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã‚³ãƒ”ãƒ¼ã•ã‚Œãšã«ã€ä¸‹è¨˜ã®çµæœã«ãªã‚Šã¾ã™ã€‚

```
SampleDirectory/
â””â”€ Hoge/
   â””â”€ Fuga.pdf
```

ãã“ã§æœ¬è¨˜äº‹ã§ã¯ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚å«ã‚ã¦ã‚³ãƒ”ãƒ¼ã‚’è¡Œã†æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚


### ç’°å¢ƒ
aws-cli/2.9.21


## ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚å«ã‚ã¦ã‚³ãƒ”ãƒ¼ã™ã‚‹æ–¹æ³•
1. `aws s3 ls`ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã€‚
```Bash
aws s3 ls s3://sample-bucket/SampleDirectory/ --recursive | awk -F' ' '{print $NF}' | grep '/$' > ~/Desktop/folder-list.txt
```

2. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸€è¦§ã‚’å…ƒã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹ã€‚
```Bash
cat ~/Desktop/folder-list.txt | while read folder; do mkdir -p ~/Desktop/"$folder"; done
```

3. ä½œæˆã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¯¾ã—ã¦ã‚³ãƒ”ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
```Bash
aws s3 cp s3://sample-bucket/SampleDirectory/ ~/Desktop/SampleDirectory/ --recursive
```

ä»¥ä¸Šã§ã™ã€‚
